{"version":3,"file":"index.js","names":["scanIterator","isNodePattern","cb","TypeError","throwError","error","Error","call","scan","image","x","y","w","h","f","Math","round","_y","_x","idx","bitmap","width"],"sources":["../src/index.js"],"sourcesContent":["export function isNodePattern(cb) {\n  if (typeof cb === 'undefined') {\n    return false;\n  }\n\n  if (typeof cb !== 'function') {\n    throw new TypeError('Callback must be a function');\n  }\n\n  return true;\n}\n\nexport function throwError(error, cb) {\n  if (typeof error === 'string') {\n    error = new Error(error);\n  }\n\n  if (typeof cb === 'function') {\n    return cb.call(this, error);\n  }\n\n  throw error;\n}\n\nexport function scan(image, x, y, w, h, f) {\n  // round input\n  x = Math.round(x);\n  y = Math.round(y);\n  w = Math.round(w);\n  h = Math.round(h);\n\n  for (let _y = y; _y < y + h; _y++) {\n    for (let _x = x; _x < x + w; _x++) {\n      const idx = (image.bitmap.width * _y + _x) << 2;\n      f.call(image, _x, _y, idx);\n    }\n  }\n\n  return image;\n}\n\nexport function* scanIterator(image, x, y, w, h) {\n  // round input\n  x = Math.round(x);\n  y = Math.round(y);\n  w = Math.round(w);\n  h = Math.round(h);\n\n  for (let _y = y; _y < y + h; _y++) {\n    for (let _x = x; _x < x + w; _x++) {\n      const idx = (image.bitmap.width * _y + _x) << 2;\n      yield { x: _x, y: _y, idx, image };\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;wDAyCiBA,Y;;AAzCV,SAASC,aAAT,CAAuBC,EAAvB,EAA2B;EAChC,IAAI,OAAOA,EAAP,KAAc,WAAlB,EAA+B;IAC7B,OAAO,KAAP;EACD;;EAED,IAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B;IAC5B,MAAM,IAAIC,SAAJ,CAAc,6BAAd,CAAN;EACD;;EAED,OAAO,IAAP;AACD;;AAEM,SAASC,UAAT,CAAoBC,KAApB,EAA2BH,EAA3B,EAA+B;EACpC,IAAI,OAAOG,KAAP,KAAiB,QAArB,EAA+B;IAC7BA,KAAK,GAAG,IAAIC,KAAJ,CAAUD,KAAV,CAAR;EACD;;EAED,IAAI,OAAOH,EAAP,KAAc,UAAlB,EAA8B;IAC5B,OAAOA,EAAE,CAACK,IAAH,CAAQ,IAAR,EAAcF,KAAd,CAAP;EACD;;EAED,MAAMA,KAAN;AACD;;AAEM,SAASG,IAAT,CAAcC,KAAd,EAAqBC,CAArB,EAAwBC,CAAxB,EAA2BC,CAA3B,EAA8BC,CAA9B,EAAiCC,CAAjC,EAAoC;EACzC;EACAJ,CAAC,GAAGK,IAAI,CAACC,KAAL,CAAWN,CAAX,CAAJ;EACAC,CAAC,GAAGI,IAAI,CAACC,KAAL,CAAWL,CAAX,CAAJ;EACAC,CAAC,GAAGG,IAAI,CAACC,KAAL,CAAWJ,CAAX,CAAJ;EACAC,CAAC,GAAGE,IAAI,CAACC,KAAL,CAAWH,CAAX,CAAJ;;EAEA,KAAK,IAAII,EAAE,GAAGN,CAAd,EAAiBM,EAAE,GAAGN,CAAC,GAAGE,CAA1B,EAA6BI,EAAE,EAA/B,EAAmC;IACjC,KAAK,IAAIC,EAAE,GAAGR,CAAd,EAAiBQ,EAAE,GAAGR,CAAC,GAAGE,CAA1B,EAA6BM,EAAE,EAA/B,EAAmC;MACjC,IAAMC,GAAG,GAAIV,KAAK,CAACW,MAAN,CAAaC,KAAb,GAAqBJ,EAArB,GAA0BC,EAA3B,IAAkC,CAA9C;MACAJ,CAAC,CAACP,IAAF,CAAOE,KAAP,EAAcS,EAAd,EAAkBD,EAAlB,EAAsBE,GAAtB;IACD;EACF;;EAED,OAAOV,KAAP;AACD;;AAEM,SAAUT,YAAV,CAAuBS,KAAvB,EAA8BC,CAA9B,EAAiCC,CAAjC,EAAoCC,CAApC,EAAuCC,CAAvC;EAAA;;EAAA;IAAA;MAAA;QAAA;UACL;UACAH,CAAC,GAAGK,IAAI,CAACC,KAAL,CAAWN,CAAX,CAAJ;UACAC,CAAC,GAAGI,IAAI,CAACC,KAAL,CAAWL,CAAX,CAAJ;UACAC,CAAC,GAAGG,IAAI,CAACC,KAAL,CAAWJ,CAAX,CAAJ;UACAC,CAAC,GAAGE,IAAI,CAACC,KAAL,CAAWH,CAAX,CAAJ;UAESI,EAPJ,GAOSN,CAPT;;QAAA;UAAA,MAOYM,EAAE,GAAGN,CAAC,GAAGE,CAPrB;YAAA;YAAA;UAAA;;UAQMK,EARN,GAQWR,CARX;;QAAA;UAAA,MAQcQ,EAAE,GAAGR,CAAC,GAAGE,CARvB;YAAA;YAAA;UAAA;;UASKO,GATL,GASYV,KAAK,CAACW,MAAN,CAAaC,KAAb,GAAqBJ,EAArB,GAA0BC,EAA3B,IAAkC,CAT7C;UAAA;UAUD,OAAM;YAAER,CAAC,EAAEQ,EAAL;YAASP,CAAC,EAAEM,EAAZ;YAAgBE,GAAG,EAAHA,GAAhB;YAAqBV,KAAK,EAALA;UAArB,CAAN;;QAVC;UAQ0BS,EAAE,EAR5B;UAAA;UAAA;;QAAA;UAOwBD,EAAE,EAP1B;UAAA;UAAA;;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA"}